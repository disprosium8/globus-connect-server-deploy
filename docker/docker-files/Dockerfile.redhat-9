# syntax=docker/dockerfile:1.3-labs

############## STAGE 1 - Prepare the image for GCS installation ################
FROM redhat/ubi9

RUN <<EOF
    yum install -y coreutils-single gzip sudo tar util-linux
EOF

#
# The Redhat repo doesn't have the remaining dependencies. Grab them from Rocky.
#

# This is the base64 of partials/yum/
COPY <<EOF /yum.64
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
AA==
EOF

RUN <<EOF
    set -e
    cat /yum.64 | base64 -d | (cd /; tar zxf -)
    yum install -y -c /yum/rockylinux.repo cjose python3
EOF

##################### STAGE 2 - Install GCS using Ansible ######################
# This is the base64 compressed tar of the ansible repo directory
COPY <<EOF /ansible.64
H4sIAAAAAAAAA+0ca3PbNjKf9Su28s04yRxJS7KsVLV85yaO4zk39lhO5zq5nAKRkISaJFiCtKM2
+e+3C5CSrYcl+aFcU67HEgUCC+wCWOwDAAuV6PrcefKIsIXQqNf1N8Lkt36ubO9Ud6pblUZl58lW
pVJp7DyB+mM2KodUJSwGeBJLmdyWb9H7PymwrP+zb9vt9R+8Durgne3tef1f2apuT/R/rdqoPIGt
B2/JDPiL9/97j/dY6ifqQ2mjtAH7b9tHPx4fdF6evH19dNiE84FQwMNLEcsw4GEClywWDAcKXAnf
h4TTx4BDNnzAlUHAQg8xXQ14zCGR0BOhh3kQT0/gAINXWYX0zk3jmLB6IuZuIuOhja3Awq9lHLCk
iU+j+lr46KccftB1YCHKdyxdlggZguzBQKoEfKGSp+pZSYSXmAURtmxn9FwqxdLnqhOxZNDSj4Rj
P8WGsEspPKVJOR0mAxnWgMexjImMEEQCPeb7CrrMvQCszklV7HRF6EQ6MyVhUUS2GfNAJnwT1FAl
PLChzTmRMUiSSDUdx5OuskdzTQb5vHN8lnCVODHvIdtCl3dYFPHQEy5XSEDC4yjm+NnxhHLlJUdO
DZLAL11/ZdrSYkgP0fVKhpsJRLEI+7CpLgTi8zYhYepClRBL5LNhJ0vuEO8UshipVLz0tcdkAeuD
fPzRcOhKeWEPA/+h61gg//FldVL+12uNQv6vAywtN1UTUL6VALRUbOIDgAV9X3ZTZbkyDFE6W4rH
KHgK6fBNQT7/dcc/khWwuv5frVWrhf6/DrjZ/zNn/L1Hxer9v1OvbxX9vw5Ypv9zE+GuA2Hl/q9u
1eqNov/XASv1f8BEeAcFcbH+tzPR/zgAtgr9bx2wAUg/DoDPaZg9kB2KNuNntCotk1Tqu6oT80g2
s8yFDvjNwDLz/5LF91INV1//G/VqrZD/64Cl+/+Osp9gkfyvYWfflP+VSqOQ/2sBLdc7IuyJT8bw
NxJ+JOkB8oWhOXrCxGyRaOYPmDReL0aFS514wP1OdNHvBP24CeU//oDNYRrQAOuJvhWwkPV5vAmi
B0+zkUgeziQW3ZT8up2A/SrjDg5CRV7eVgs2G5vPgPuKw6YX9mAS0Zcv5WJxWgWWmf/aZ3yPBeAO
8n+nUS/k/zpg+f4XNPt9HwWGN2DJKkvB7fK/slWpTMr/2naliP+tBTZWhtIGaDh62z7fPz7ePz86
eQuvT87gjHtvWAKvDs6OfsbUnw/adukO6E0cMosn9pibKIru6UAXrjVN/TqPN3ak6vRYIPxhM6/+
M7R1zMtjPr+ec/6y0oQGlnqB/9/j/2eo1eljhz4a8zA0Yd8P2LEI00+Y7yUPk5M2PrzmnowZPpzE
zPV5/n7UtDPpXgwnmkixuqMgknGiw48HpwfHcMGHwD9FvnBF4g+hy12W4pJH73PO4DIKgfRSfPQk
VxTro8ifJTQqxIk4dEBzCFdsSNkdWjApbFuyIGQBLtNHZkqP6z07/QlIIVCC4qWEAhd2rF1S7iFX
FCGIgg6mmxgBPYxjm77d0/RHsfwVxYct474TpV2HR9x3ELV1eHpo/evgF4vqslAXWGLJ//IFK6Ig
bB6UmFUGvmtB2fC+XJpP3ZiyKaqQPaYCU3Q5kujDirnPmeKWCeAuTZUdSha7AxvZqevFpiZYMSpR
imLbq9K8AYc85DGSOwTmY4erHBXOHDg4boAIUENSgIXB58kmPnFQacztKX5NK2iL2EUlsFG+uhsp
01peuaFpOtBTwBfJEMSoM2lDwiWngLtM+wOKzWMKAyV7CXicguY8dIdZSH7c8TRw84mEqM1cMUhH
Wwhu4hDILkRtWJHGehcCCz3MFeCco/ZLBQN2yakN+JsyeNPsnFZTF7ETS1jZRoqnN0s+exAGfzdi
MAqQDnJi0JFIs/BcoleGNIYQu0Q0AfHx4PgFciUWl8ioS2TKUxpEoUwyufZsRPIrwwTN+CnUmbDC
VnEWTLEg3xPRTYWPBoWt0HDwDU1u4GmejMRdVos1nKrkboPtRXnRPDOElidE9eHxyY/v2l9DWB++
bN9TVsur0JfMU7ZR+bRgS6T0L0Ti9JMdx1hwDlXgIJob4vtQF5ktaKll11rl8Z4IBfFRLS1zZzVt
tmKKwvaG/fo+d1R+QAmbK6zY0WMyMjz0O5PYKwniHL8eFGOD99qic30KGD7BS9NoaOtGZ7bxmEmC
T7Nm0Wwoa8qv2dZIL1hWPjNMxVZWsWUqtupWO2vtLUSpUZbl6D0IF5CbOQgehV4e3kruual6Lr00
95NxngciOPeSfA2K34Xq9i4mktPwwTt5XOp2ql0ZZdLII10eHJ64DsoBW5eyvdnzHAkbV6CzGj5J
tAlCxPK5ZCyS9/PYcoqlzdj/kGUlulqzaakDZod27uki6KKCl8Z+KxdR1Gk35dMKQiuXrCiNqI89
QV3rLKs3On+jxpDEcrLG9ZjwaUdgwFEj8lpoWSDvk2H21gwYr1XJfuevW9+/yFL6Ud8dcPdilAUT
cK1o0W5NpFV3UXQhqMEWvpq1EgBt08y2DRFBmafPqM7zvXvan2dU2JFTj/vGiXfL+L33EEXV5tP0
YumLkNM6glTrWmmX6D1HKKFsmupaCk0/VR8gR5E1RI9ONvYNkHrL44T10MhFWk5eL0v/+LVBh/qb
XnK5N708z+TLolV5Jrn17VlL5dd2ZRRwB1jd/+fxrmArhYIWxH+2txrbk/6/Gvl/C//f48Od/X9T
7r933TRMUueVHh7rdPzlNS7n66tswWeoVOiDXH5V+lmtzi2duXeagPMCG4KZu6mPK9WQ0yPmEC4+
9KTLfPz+lQUB+fcuUAInwp3vPTRtxpyGa+QFvKc1xaIk16y6azCmsJbrxlTHGFMdzGLjq1nLw/JL
dbZA6gUPtd5bNUp86TN3eslGdjhKprHLlU2HQuau3Dcrm+u/y8YBee4Ina4u5n20+5uw+d+N/6jn
SDZsZummTbCZpz2YubW6eTnDK3Bflpkq7siqOZzagKV5dT+zZJofM42SpZkxrmMlhkwZL0T+eyX6
qLpZ3WFLnzBSAxbz69NshvJto07+AR7SMqGWLCZFU4DpX0FTn9th+G+Tw5Q6K1eJZ3N73/0tFTFv
NolxzabO2WxOcQ8H3Ty1vfzDQ+ro7yIPhaXxGZ6eg8vQJJsv4lOdu6NzmZezV4+lFP4R1kLh/wvC
6vq/ShVfbSPYIv1/pz65/7tWqVUL/X8dcGf9f9oAODk9eNt+1z545B0AI18S+KR162O/VjDtUOVJ
Gj2bbzW0TRxwOZuhvsg+KDdhe26eDE+ZENlzszWBgliagcecRVMbA5aPNv0+jCJcR1cIOGUlvu14
kyGyCDndMSAxHlWiN9Qt+pYDTrOo/ZbDTXeg908ZbCI6nb9mtIkUt7lxpv/7CNNqRuZqMY/plWEF
Kwiu349icLw5Pz9td07PTv79iw6Fbc61Ik1wbJZtmAfETDjs0Wyt5fX/ux8AWXj+Y2dS/6/UtmuF
/r8OmJowqE9FzL2gzYI347r4PvRY7Infea5EZ9MZso1gTTB7w0fJ422uU6+MA7wJJpo0LpGSr50k
VYmCoq6feryjx5+pTIsMKOe2KGlj0+16P6Xuk3JGY7c4HDIJ+fwfXZL0CHUsmv9b9cbk/S+VneL8
11rg/ciI/lCqVBv2Fv5VRipCthCgYtDS+Yrp861BPv/PDvZf/XRgB94j1LFg/te2q5XJ+1+260X8
fy2w243B2SvtRsB80Q9bZZeTn628h8vt7qA2mUrqQe5mOs2uDNt1BjXE4ER7pdKuxxO0FpT2ZbXK
9GlQqTQIWDzcO9d2m+yRSk72lNp18leUTfp7ep3f9cVephTsMhjEvNcqb7CuTBMLDUMrO45R3tun
JDina/tM0q7DbsFAqjvqt6gwWL4IRKJ3/qvyXlun6939x+P0MS4nRzYT60BeWZ60hIVqi0UHFKye
jG8cLlDlvZGK80ZegSfhCIzbju5FlDHcyP2PvIrZDRjX7AvsGMXLe8fmgQrMy0sGLCOevTQPt+R9
OWBhn/uyj5nzx+vZdx3qp10n62zs940NmOqKkr48Musq+r4UaIgDef3I9cgS1POikXvT45Evh/qO
SRwd72cabh+e5jbx1dXVfNv3GbKWPEDZQLXhCKsiBNjD+qgIznjtIoqkwOqI/Tz0zA/mBSIkw5ih
MqRGTmfu0TkacqEGjH5cay0VR+K81DXHSMYeqCiNI6m4skdT5iKUV2gr97k+s6Jw5CMubKtr/B38
EwsitMPM5ZqBudDygvtDCDlmTCQd2mEeixLzqycSGMo0vm6B2qXS8+c4TS/rMEBqBTnPr+h0S0+4
gs4HWRnXEcX7GwdgkAiXeymSO+azvq9ykZPBuqzfGO1WP8Wedp49f26bC0RHblHtjNZHR7LIvxkH
umZl5p85z5ORrd+aaKe+LzS5iU37ADSvfNaHHsdJHJNTSLvkddBAM8LW43OpeVeq2HCITXB9GZo+
0XVg1ZrPN/gVSs+4bD5+/Kj9afrH36A/Kp9zEVMGaVff92kYOIePZlTZmD3HW6raI9Msv5g0O9mE
g7jPk/yi0VKN7hpN0gitN6WuZOz5xNF2+43h20R+SmQ4oF1XpmFi+EzDRaXIIkzFsnZp24azNISP
mY5g5XdEgmWN71fdNXg7Bu/e3/ElMjhu7ZqbUDv0Yw+uXy/50fRHJrJK+0gatvfCnLWKhrHoD4xI
eBcK7ZZKhnrBGAiX9SVOJiygMykgFwxyzjMYM8FWOjV7FMylsnSx4UjQ/JbS1MSeJvo/Zqn/HI9v
bNrXXpALKKCAAgoooIACCiiggAIKKKCAAgoooIACCiiggAIKKKCAAu4I/wPLHR8oAHgAAA==
EOF

RUN <<EOF
    set -e
    /usr/bin/python3 -m venv /venv
    /venv/bin/pip install --upgrade pip
    /venv/bin/pip install ansible
    cat /ansible.64 | base64 -d | (cd /; tar zxf -)
EOF

ARG GLOBUS_ANSIBLE_OPTIONS

# Modifying this arg value on the build command line will cause RUN to reinstall
# Globus instead of using the previous, cached iteration (if it exists). Useful
# for speeding up re-runs to get newer Globus versions.
ARG CACHEBUST=1

RUN <<EOF
    (cd /ansible; /venv/bin/ansible-playbook playbook.yml ${GLOBUS_ANSIBLE_OPTIONS})
EOF

######################### STAGE 3 - Prepare GCS Image ##########################
LABEL maintainer="support@globus.org"

# This is the base64 compressed tar of entrypoint.sh
COPY <<EOF /entrypoint.64
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
8TAexsN4GA/j68Z/ADpKNaIAKAAA
EOF

RUN <<EOF
    cat /entrypoint.64 | base64 -d | tar zxf - > /entrypoint.sh
EOF

# These are the default ports in use by GCSv5.4. Currently, they can not be changed.
#   443 : HTTPD service for GCS Manager API and HTTPS access to collections
#  50000-51000 : Default port range for incoming data transfer tasks
EXPOSE 443/tcp 50000-51000/tcp

# Default command unless overriden with 'docker run --entrypoint'
ENTRYPOINT ["/entrypoint.sh"]
# Default options to ENTRYPOINT unless overriden with 'docker run arg1...'
CMD []
