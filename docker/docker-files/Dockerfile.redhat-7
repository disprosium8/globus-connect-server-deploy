# syntax=docker/dockerfile:1.3-labs

######################## STAGE 0 - Build the base image ####################### 

ARG BOOTSTRAP_IMAGE=centos:7
ARG YUM_OPTIONS='-c /yum/redhat-7.repo --releasever 7'
ARG RELEASE_PKG=redhat-release

################################################################################
# We build the target image in 2 phases:
#
# - The first stage will create a root of the target distro using the base
#   image's commands. This results in a root that contains the yum/rpm commands
#   of the target distro but with a rpm database in the format used by the base
#   distro.
# - The second stage will copy the root to / to create the final image.
#
# We'll want to do this twice if the BOOTSTRAP_IMAGE is a different major number
# than the target image because the yum/rpm database format changes between
# releases so we'll want the final image to have been built by that distro's
# tools.
################################################################################

# Stage 1: Install the target distro into /$ROOT
FROM ${BOOTSTRAP_IMAGE} as stage_build_root

ARG RELEASE_PKGS
ARG YUM_OPTIONS

ARG ROOT=/ROOT

# This is the base64 of partials/yum/
COPY <<EOF /yum.64
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
P9z2wuAAeAAA
EOF

RUN <<EOF
    set -e

    # Yum repo definitions
    cat /yum.64 | base64 -d | (cd /; tar zxf -)
    mkdir -p ${ROOT}/var/lib/rpm
    rpm --root ${ROOT} --initdb

    # Create these /dev/ entries to avoid 3rd party postinstall warnings
    DEV_LIST="null urandom"

    # Create /dev/ in ROOT
    if [ ! -d ${ROOT}/dev ]; then
        mkdir ${ROOT}/dev
        chmod 755 ${ROOT}/dev
    fi

    # Create the /dev/ entries we need
    for dev in ${DEV_LIST}; do
        if [ ! -c ${ROOT}/dev/${dev} ]; then
            mknod ${ROOT}/dev/${dev} c `stat /dev/${dev} --format="%t %T"`
            chmod 666 ${ROOT}/dev/${dev}
            declare ${dev}_CREATED=1
        fi
    done

    yum -y ${YUM_OPTIONS} --installroot ${ROOT} install ${RELEASE_PKGS} yum

    # Delete any /dev/ entries we create above since they may have incorrect
    # major/minor device numbers for the target distro (they'll have the major/minor
    # device numbers of the bootstrap distro).
    for dev in ${DEV_LIST}; do
        varname=${dev}_CREATED
        if [ "${!varname}" = "1" ]; then
            rm -f /dev/${dev}
        fi
    done
EOF

# Stage 2: Copy /$ROOT from stage 1 to /
FROM scratch as base_image

ARG ROOT=/ROOT
COPY --from=stage_build_root ${ROOT} /

############## STAGE 1 - Prepare the image for GCS installation ################
FROM base_image

# The image we built in stage 0 does not have a Redhat repo definition.

COPY <<EOF /etc/yum.repos.d/redhat.repo
[redhat-7-os]
name = Red Hat Universal Base Image 7 (RPMs) - OS
baseurl = https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi/server/7/7Server/x86_64/os/
enabled = 1
gpgcheck = 1
EOF

RUN <<EOF
    yum install -y coreutils gzip sudo tar util-linux
EOF

#
# The Redhat repo doesn't have the remaining dependencies. Grab them from CentOS.
#

# This is the base64 of partials/yum/
COPY <<EOF /yum.64
H4sIAAAAAAAAA+28Z6/zZpI22J/5Kw7wDgYz0NjMpDhY7yyzSFFMYm4sXjCTYs7h16/OY7fttjsO
3D272KeAc0ToJu/Au6quq4pFHUsD/u4fLNBbSBz/8vmWX35+OYYxAiExGMEg4ncQDKEk9rsP/B89
sU9ZpjkcPz5+N3bd/JfO+2vt/x+V473/Y5oU4fwN+e2Y9t0/YIzPDSYw7M/uP4oSX/afQCCYhD/3
HyFI8ncf0D9gLr+S/5/v/+//sPnfdNP/DbRhk35892GmycctnD/stlzTcQrrDyac0g+pCfP0g/z4
N1N/TP/+8c2H9gSid8My1u+Linnup/8EwThpv1mi8tvvO/427how7to5bWewX6K6jMF3K5iU0/zl
YErH9xggCZLP74/2K/G/CQzsJhBI2zCq33P57gMG8j6v0uN9mJV1+h4G/NTc90S+EXXxmzvvf2N+
Ge/zvLhI4+rLRf/Td/f//fJ5F6d+LNs8Cev0H+MB/pr9kyj8C/tHMRj9av//DPn9lNTffBrxH8z/
u+eP2vARd2P6ven/y5jW6fvgbaBvu/+XzwvCMS6AphzHbqzfxvzdp/2/7fJnyvR5FKdz136bJguY
hHP4s1bwZ12CP3b4afafA2pP8Keu/+AHvoN/tO7v/uAQvvtz7uCnZQDAzxb5zdK/J5L+ucXa37f+
I9b7w8B/tO4flvrT8n+7Rf+N+/8F/7u4OuqyXfb/GfsncORX9v/J/77a/z9efv/T5v+xGzA/v/9Q
Pht+YQ3fK+0vTeET+r//avr2ZwrVjfnPlPq/PpX8ux/V/V8/1e277/v75meD/Fzj/8gM/pLuf5nw
29Z/tqCw76d5TMPmr66J7vvnlzN/u2X92OVvtLJ/zP7/ybF+4zH+iv0TJIH+0v7h98dX+/8nyP/6
kbf/QrvfCvlm4MBP7Un9SwN40/nvr/q1Bn1zBb75FIYXJfVDF/UP3WYUif14n/HBKBp7/9IMAI0h
qYxId9npMzzNEscTDs+NyNCtCZ0EBNHweRAaElOXV5rOS20aa44oa2GaTzhVhx4Ad2qOmCLrigWc
a64Se//mkEmZ6vmjqalnwB3wdK8ldOaKnRADdN8EKEvg1WWCvlErgKNys7Ibn0mVbm5izwiuQe8q
ZdxNwsz1Mu/3il0sUm7dtxnLd3m8rZU7iUbJVPJ+54AFBc1awSSfRrWZKheWyeqYgvmD3mD/BeX3
mDsjbXittTg/Ufrp5bs+PDMbWhSWsp8CsNy5VkfmuK3vdzF7QQvhVIP0rMvnYtLnq74XHfVIuza5
NA9J0CyLGHpsP5YLxb1Q6RUAEkuMjGfa6F5eT2jw+7kTAqLYSUh18OUCefbJPbzkZeDPK06Zvnwv
X+XWZA+WzAODzgCtSrS4jNUzbUFr48CpLkqWm6Ybo/LplXC3Ba8armPHkhTl2tdq18YQr4Q6WK6c
elYB7hpIyYVnOKmZyCV/bqLmPPcjmDB0QCQ6E3zWnI/7TajzG2OmFHi3XN0e2ym776KcswDXoX5E
oKDkW2tmyf3sZIUxKzBd8HQqwNIlWpxONhuGP/w7RzGJje2GilLOGNzPUkOBgpPENgfTO6GHemEn
A+ENa9NOAVJc7k50dC8stjokv7MM4tGkhtwUY1rEZLmd/l19ZYBhUi8oeb02a5xWcT0z/owLHaZI
BF39jBSTWFmHWR/Ofn96iKDSZs+KHrNRG23SBs0AM6c+A3evfU+tJd5ZAqReAtc5QhdvJW7voyY4
3m1Q3Dqv5OYcgc0cEaKOqftuax0MUBrqCE5CpiuM5zdeornclQxzs2NzG54t5DyIi0rGzggjU+SZ
oU/brM8WoJpLEbfZCsAa+Y3OfYfNK4ndJF7IJY42pPT95+U0fWdN+qeLFaF5G9zzsXYaLHDJQUcL
ADfEzp9cMZFC3gapoZ5KwLMr8rrkufCUvfSsVUcLcAmWrkvDhC1ybNnd4K6Pi/RqRheoKJAsqBLH
5qv5BE2VvKsdybNie/cGj9NPhrEmWNw62D3rme5C7m5n3mBgnYyFrA4OAOjpjsufeS9rsMen58oO
V8crp2U+uNLjX6+HlDLxuUdwEYWN4V1eiiUZ8IOTsaCDfR04a3sYby6GYh6LRDDoRs/wqIerW1Fx
NcUhLl9yVBisOi/d7jwOaNmPXDJfEVFa592rAId8+nvq9WihWktn56VQvQochI67y247GRpDfQtH
Snz1e8NwtAZVp1bns7WBID9YmwncWz9QypwSXEgvtjWQ7TIfoXidQM+zrIgkT7AEk+xWjS/Hsvy0
VQ+vy/XZmp/HPsQhQMBZpGcQAz5RFUN192qbHmM+oemoeg977vflom93dsgumkwWD96hw344rRke
KIs8DwYwtpV19utEuu7qRROSEIE90mNV569bdzPiZJfvSbGYDYdi9OK5rOJe8tt1lN2gX9QaBS7u
pAcepq+vO5c/NsJ/xA55Fq5HxNAzXe/zOZOujnrdnVv04g7rD1E2BoOc+jQXmQsOcME6yU/sKvXQ
E8ONrHldkTLyQpaRb5Ya8NdguoyJ9TIo7okP62nS8PT+S5gIJDXF5wG5Sd0Mc4IjjZpLHuPQdE45
Yc/IYV2L7bvvgO/oUv8BZHiV+0sQ89+FMOpvgzAnHaeya//zY0yn7Ns3bFZp2qfjtysMsF3TpO38
nx/3P3wLAPskvAFPxs1qegMeJ4DKOU0NuYyHQ1yct/kqKFHVB+vEt23dKaa64qjCaMvN4QN3alKg
imQBzQyRLMk8Y+/i4uCeC+O7pFpdimWMVQRzKspnGXXPwOwr3kBOtPbjKH+bBHlJgLi7omhdMWp+
withaKTe0IkP7iRhELcdkqmjlN3kgr0uq1liReQuBYGt9mwl5Khv1RWADjTHujvsW5BqQl4DGrZG
rW5TPS0nqw3iuCK34ibZo3iBV6N9aqMbspAG14MtoerSARHxsmiTbaJQn8qL5xgtE02trg+EFdVb
fFF9+Tm88IRqLWjhPYsMuvWFySneuY7g9RSgw5pbRR1y4l51f3VpFz3A887xT9kkr8XFN2iVkrS7
8FLABRTPsYI7PmcOlmY8zbvccKDIlngccBuNovh+YCk++3nbBvvQ88qKZiqI1NcyqNobX+Chr1q4
6zm3ngOvCzI+mq0BJMq3+MeS8nPjHFDgoF1vv/0Ae0EDe3s1Ky3PSSYfqeOCzuNAbxsqFZBQvih4
1AgYdQCyJZE8d2q59BD85R8WRnt1KGa09mgTWXVypp8gkx41xp9kU2/X7FYrJR5nLychV38HjEL0
KI3zl/WQwdEloeThlFX6fNUMd39C13lNBi2fS//AjmL2sfJlsBTTsDx1o3JttwFBRSiyVMqG3keI
dyaeo4hMp957wImS4k6ZvOz02g3NW4fq9SpfdBgUyLlDjB8A77Sp5xcAezJC1Jp13DJH+Al+groG
rYn6nvwGwmBNXLzyPbOPECxXnsyPIAlI4lynT/p4cNLxRsjjsyFqEjpuqFeI1tMbOeGUxde4iS/b
JN4Z5sGwNA0xhlymdqAAQsnzUjzV4SKsu70vwbOWYxZmI8tWZRhixe3B3vI3/hg8x27VjS5sid59
ms6l8r2EO8CazKbY8qwaUOu5Bs6BFEYi73j0MDUCBCMDaSd0o2r+ElpKLeOsD4lPK8J2dTnWC80B
ktfnq/J8zJYJZT0lOuj69peG5E5pwQ0zqeH73S0v6Own4ectgOO1La4j2LHxKmGLAlTXSmrUfNov
7OuSjPfU6CB0FXbG4kqYsQyhyvgZRTIaoTc892ORrx8kTE7qg34YAn8D9Ivm4oXP3bAqVqLZPnrd
E6LYs6MwI172Kyv5Hq+V1zAsJ31wulJX52PETSekWhQcJcAkNON9Rqc7J2sGj5xTaIWxESsWPMXR
L0RBu9fhQZLxZQBH7Zj0i5+8eYhIJ1C28isNNFlKYz6R6FDzMBeK4HlahofnXXDtpSbuRLsMx0W2
9mrut6sASgx9YlgbwqSVQchDvgEia7vHA2rxddHw6n7xq6raksuKoUE9cO0mkmHFVcqWvwgNMtQd
scQqyWf0whLhTcWfwKMUoL58M9+oVClFg1IIp0tkRE9LYMGeDRm3FuG+QF473HNve7AdPZs2V1Cz
FJcuWAmwj5tuClOg+rvRSjSij3M+I/5jO1FHEiWCs8AAJ+Ru2LBUy0LZsoynx9LqPIE5Rw4uwKHP
wNNjcjM4ArV6jn/JyVA0aR9aPBvtKrmD/UXcpMB3ZfVC+8U6ZqKXvZYETbnlCgLlxZci/X6DrbcH
2MpjZ2GIaCSFhPD+opkZftJW8DiYqw9pqymdeHivGE4IHoihEvQnIOqnlP0tgPhH8d+ffory28aY
fy3+R+Bfxf8I8jX/908Rq0g/sq6uu61s84/vH9B9fD5oi8P2I0o/lilNPubuY03HMjs+3qry0Ydx
Febp9BEtZT1/hG0CTGXevs+Ljj88OvyPD6mNv/34sIpy+tLd++NLV1k3/tRB2f7hfKAfu2SJ5+lj
Ksq+f38ZZnM6fqjdmjbR+wCBIOo/Psf60kNY1x8/5NM/JzcX3ZT+2MW3AGAs6TS/Sdn0EUbdMr9P
+GEaU9EtdfK5sOlNzD6vndJ4Gcv5+L9+el757uB9Iz4+MIgiTFDgMBTmcPjLFL6BoW8Q5Ber/Lcf
8ntfRkD+/eP/+BN9/p/A38kmxXbRxY8V/hb5lvj4N1G1wS95y3//IWXCj/nT+mSQbIHQWARp1HxZ
T/YdDzufUfN9td2S0nT2Va0m6SVXbpb3NH0EeCoA0G0+JRG/Dpx5RJudXikh6EcGzrLFvp8Jf7nF
CipEqvt8ap7zCqT3nBLvuKHq2iqK8u6AU00GKXc08kTKLEDT64VJ3bkeYflHYq+Rz548Sd1hvrUt
p4AVSHt7elSY9beT9KAYWEg9wjkJrz3cTztPI8yuS0ZJ9OXJYQy3Hd3tDbFW3LV2puoVxIvBzLfn
ekPOQ+/kAvBE4aLGC+VtUVi3fpLCkMauT5cO8NNi+055WKvxcvuITVxPPtmGEC9gsVNLX6U4RtwA
XHrNfoMlluRYbYxuK1dqXM7czTeJo0ZeY6VcW8SZ2809NqrXyF72NcedamjJlbEPF6D6W5po9kXv
BJQTtcclGdZLqt6ZtaB8gVpygTaYKhbJtQzyVeQfomj3p5qrpNc+4fwFgJzeUU3APzW/vcfpmiKz
xF7JHimG17hrt0UisyrwU1WK34HyFR2Zeha8kOH8wqXvTxjQY+8Jg6R86lB1kAmkEF60gFKGV4Nr
9PfNllpvPp5mtYyhky13lOnDiwd7aeyWCCb7wM2Za9WDEHzf4XRzTlFlrdpt4akyVETTOsNyMPYK
DkJvuW8EdP1lTLBLxkOaLMiBIQDRUmSevzVm7Wi5ipckqVqSHMhG5gsv9BqD0oqvAaN3lUY0WTZq
1oo+bq6TG3+UMjHypyhAyjs2jJrHIrHF8WMa5QeCeH/S1xhxXokn98mtfhNEpwrf1wBKo66RRcj0
y/9MmbA0Swt09cU2Psmf+CZ9EvMmgQxjsyz9+FVG5E0A6aAtLyZovxXXPd8Un5rwp2CCgYAeLx93
FFtQHp50t89ZVdEuxvDsUN5qg15str6zADLz43L6r0G9FQPNeyEyqXD2GKflnsYErNSImq3yq1Lu
3Jo7UkFWDzKcatV3NJ1grAxgQVkmwSU7UTtoDqe8gS5XvxlCkleoPLCShm/4eIwsJR3M6a9IA93e
PMfN+sJHl9uGA0uLtokix8v1wog6Llw01eDF+sKZN/wq1ZTcv8OPyAzJZK30nC8ywbzAhXRh5jlE
WJIHIBBR7ye7Bxup7KjOmLFNIf79CPmyyA4wNO4BSy9Hdi8f69Sc0wXrO8kjJUo1WLk/+DePzyS1
C0hnH26b2YIJ3mzII7DkV3Q+s4vdUL580NCbrB8c8dbu0jXMaNl7w2tqWo4K4NpVAZZHjrDCwvVx
3i+YeXVWV4a8/R3BVM+ORLLbaytC8kG/BqHVBiLtiIxnQRLPUVUBxGLGnaQXl1sFrVHCq7cHe92e
FJXigyeq3JImaFFb4co9ap6+1Sg2IDeqDStLNAX8XgLy29EUKOeYYpFf44c0lwjcvkqzIPNDkBAt
jmnLJyPmOZKUXCzqlta3ZVdGVuh90kFwQBOquYbxVyCHj30xmMFPmPwZHogI2QQHX0hncpesPxOQ
jnYYjNGupIJQXl0Eqeg8H4DkTGiEtG3/5a47hmxUk7byVoDQKzViK40lO4ESaBTiDYzhfs0fjxo0
SPQ47/nd/5IROaMb/7cQwH8i5ocf09L33Th/jvRv4bKXdRmOx79/aX8jOfCHUqO/Af+JPwP/wBf4
//gt4f+3g2qxZHhn48TKZGh204tA6tfqJV03h5oEi+uGQ1d2eImuzwTcLv4i4draYFSzrrzhWICj
5Fch53G5flo4RUeTwh3ObIYUu0urik8H44yu6863mWvboxaYeBBBmpDRSMJ4CqQBe34qeLBH4Qpd
lln/fLCi9bsx7vHFlTgn798+nbnTBppMXSQyw9GnHiF4Ab6xebcQLHAEvSgxQzfJIecqp/oOfyKQ
hDgQngulMo7CRWWZiG+sL9/UjHkWa6S4TEY8ERRu8mYBHsejnq/3puxjKtouUxjS1bNyJgMMouw1
ugyZ4lX0GJe74oy3SysWYVPffFs8aH2e9BywX6BqP18404zspFWPvsXQNreUaeKph1I89RfSSjdR
WCnmUjrK2jVcsrUhY+YGHN6vJ3ASD5oGMYg4MvxwZPBRW+4Eg8T1vTFv1YkpZrZhB5d4SPXywKYz
Rj7PzDnPuzEQp4wAaTC9BxopYosmF0ZPO5jht0JflnorkDTFmnSRB6IAKRKWp17wQY8p4mzABlYd
nNc0AM+gdTsxYTVCvrK7LqUNh0j27Xx1x5HyL9R0jmTpiT52A7opzuo+Gqf9xjiJL4qE3XLg6eIv
paQ733Ow0N1735Px78GxyvWbWvuoc4SeiRs3uQ7Ez4vwV4RAl1LAeH7nWYBmsDcwftHEPwJGerdZ
enu4dM5/yZQIGE2zeWWYbhmX7KVxNRYeDTYHuk5VWEE7VT1ei+Ttuq7sFYJvTTv5dFuy29sRjeww
v/x257i9XrIbJDjW5gHfJWDU/N1x6Vf558hn/B+/fWE3fUP9T9X/ktiv6n9JFPka//8z5Pc/bP4f
1f6w7++058f35St/pvonncO6bKtfFcl839/3BTI/nPNfX+ph/migb/7l+8Kcf/1F5cwbxOcu7urv
u/2Pz/9/rTrm+8n+vLDmc7j//ScLbYA/LPeXlUF/acU/qw367y76x+H+h9b95/f/Z/b/P1b/T6DY
r+z/a/7vnyO//1TBPzKCb35t73+i7PWnb36u/P/1w6Xf/ayPX6r6F7vopn8t22wMv/uXLx9/SYv/
NjMAfv/Hhb1/ci0/VPf+9sv5YezfeE3/jP3/8xXEv90Yf9n+YZgg8F/YPwbDX+3/nyL/6+NnJfDk
x79+XH+ol/h7StvJn72083Nl+umU/15EjXwLfQtjv8p+Kwx/FlXzWTDIwZdwrlq1gJcsgoxAvdfE
8mi1llaQqLquhNPYL8dSLZmQGS8xeQ/oGseseW6F5Y0CYXjmeAmSz6BMhy4PCxkVuYFXvUKpsz5P
14t/45/Ea7xdPd6vyha0gG1f7OO+Dh1dEdA2sIS9glZ16x3N1yn3NqvREdWovlwzZD6HZOQR6NYY
OX86L+u48RuAom5Ke25dROAoPWIZTJMKAgsD8hdYNVEsB00QDs/sxJZjh4Z5tLg1fJLD7uHB0/YD
YL6dz6v8EvrTvEkofbnIK3F4j+RMqxbHLL+LLlx678wpmTMJuo+Htl4oZI437HigOHsHEizsh+uM
4itObJPpFZsTuLzfokwmTQnXvcNAz7td2x1i4LtclsTid3BZHpINQ7F1yQGf1R3ptC4MKAx0U887
6sj5lZwCwnCEHu2EWdLqBcZUg1nRbbDblFXv1ysf0HsJVsMBVIIyYGrm9i2SOIFv1nKSuJYXXIYh
9A0ilKjbIe44aFgSXEx7rB3V2Fy3Llj72U9NA5CyihP0fLCaxBqEUMEtI8ZQYdWUaaIqRkaEZ1Si
bm9KsguBtCHG1Ds+f9otC1kQiWuAicb3S2KsEmo4KNjDNt9tXv28cUKMs+Nwt2D4fIjUncdssYGu
BxedUIJL0Q1i+3OpFmAtkxdTT6EBXrQ6eT2F161gBeXE8Vo5QiJ99Hr4jPn70Lmqfy7qSlVc7rie
utHiPTJVwBYc2XAeuSXWS+LluSnWZ3KTe791oNClPjPhT5uH8nfwDwVu8iXAlwS1DxC8+CwgBIIv
0T8Dh65wGiJcJGK+xO8OokatE5FalMapki/ZceP77PiXJMAX2/mSBAD+WhZAmEDuAYkVa5cIstP0
3KWCbvY+3YUDcTEXoDU9XGQ5oya4WpudXXHiWg1OsW+3K7/PZXKhNWXgvDhr4yODML+o+dsLa8rp
BEeOlYAQj0y3U1/6jc5v/cl65EUienWEC596ai6FMXzS5pQkinfIKwTmzOrmeH5WJVI8EvgpYObu
XY656HhQExcjOYZBElu1V05zrfX+iA0yg+jTn2nTyxqafwz5cKrOBdo4uUn4mw+QY5nhsH2NWO3e
TqAt3J806g72vWjxFdk7THOGqrlEjoieEHY3acl2pUC6X80b3xNbBcR1PV3DzH8umdw0dhqfEQ9u
by+SP548Ooh1bJi7paH8QzMjtN3cDjdoGpNAQxdGoWMBIzCiUFG1/aqTSZtxXTjKo637DGMLzeO+
3uz2ua0ERRhBcZKQueYv6xZHz2NsG54kWAD0bOi0+9RVCYH/LDCk4V6qByfDisGcLjobish0zIzh
+Hzv52Lb2frTlSwsJFR5bi+Au8k3bTD9URStBxQQDinlD7oayo3n2RZPOdvzi2Gzp2NxqijVGNeK
ibaYdOmGGuyVACYF8kC4OGcdn97uo02Jp496qHTk9Ur363RvIUuLHXaNfLWIciTK9GTNmvlJv22v
fNjAoW+InGfxqqQCPJcPgyxxPcsPrYV8FKyDVxzX/i2EdVznO4ulkdomX0oD1U0ujQWmAqvPQZxo
Bpao8rJvc4GQm8fRStpefQd819y7+G8sFvwZHv7Xf/1dVez3B7fmn6DkLWYLKWbfb6t9I5RX9Yoh
h0Aihr9LfiO8TYODXCl+Orn6vgM0VgE3D9lQFH9xAY3njrK3u4Fp6+TyhoGty5VRaILOFvlmtWAA
oZqKFxAFJSObtRMS8n4H6JbJoMx4hmcR8q0vyLZNneWkwv1xTctyk6zxyUUQyG0vYYs6yggiMVqD
At7bRtbEBLg+ce6stJx5JegFki5hbnvB2gqpSR8uKd448jpOitS8QKksxBEC9c1iGRkz7ivR0lIJ
DKZlFsOuPGBIamr5njZrI8emXV4YZaVhfPa76i6RRwtvwsWz3pMTSK2+QuthP49acwBrdPCJuGEg
y3icJ2IGLa5uoOUzm110/2zcY+Z6MDuLZrjv7eKsqnF7LsKBujM1BhcB0KnYH9jFQ8ZqhjKljTDw
fVuJSj8r54HHeMvTJf8shWviL/vglyNNm323NPrIJeTNtoGKWSVauG6uKWtuGqUCNLCxA/P6sKl9
db9x5Yu8HtSSbZgFwrcNVR9vvWxovIpLynBkAEIsTpEKkx7PUsvh97b3wwCOMCs4lq6U84xH2tma
TlZfWOm4GepJuu57SQxrz/ajiwBTvx2d0FDg4MS5EriETp+mkGoZpiYStzr9k6y2mNfc3hFezD1n
XalmxKtxB1/3R7XVgP08V34lzUHxlTOFXglXvEZ09HqNNpNOuz+VjvBgy57IkbfD0L9cwjXpw6j/
8ZGsAFvfY0hS+e5eSzy1BS6Wm58g5Mlb3NRn8GQe39fm0fgfQMpG6jZq6gUIDmYMvCoPGup4oxVv
cVUvcfv5807/ElgB9HvM78vfN1cyjBa9vB5zK8lYzxnH9YXi7hyuUCZMuc363aZdaCmiN1v5vvr9
UQJvFBMFo5NZemIZxn8j2yeqxT+iGnVxRnekbnt0b3MaBJ9dgsjd3WZ2/bgJ0wA81Han0eSAs+fx
aLF96sAhlQPilvQZTG7YwEFRTa6c+1LEh/CO7egMDeHh5AL1YsD3K4BivjZrEXpxICrJ7mmUT3Q/
1yfuhmtRE4TQIa/rYqeLeZ9jBRk86HWqx0QnkJMX6psaDC8+Y6V5C2Tqrh61ACei80xhNVZQzpto
xa9dClStJKtRZbnpoXyD08HBO6HME7RuEIBX5H5O7R5BUFZFIO5pcJWyHBtMa/OJ2CWBUGJ+U6gw
4II0iz36Ekaw2MaqkGYMvRHAPTzomr7HVJg5GoE2ltveijBJKSg+W6jbOvfhvMxsXD1wBj1PUXrx
xm66Wz7CstHzA8gv+RiF6nt2PrbFusoMDnLO8aOop4twRyUqWwcRUXQUNwYuri2Ts16P19lgiFpV
iIQD7ZkrGNogDTzoBdoP7bVciorv3ZkRZdQ+8/Nkrq5bWB2F9R0ZXcm0CPqzqdu35W85CHR8ut6m
sMLUU8W9dQrsuXoHKo6r4DqmP4JMHm6g6VdRBLp8dAvivAt9VpCsPLFfbFkDCxqRej+M29Bm2eUe
9Umg63xWBNcxosSbTLJkNLOp1VyIobkwL3VMkpFSwW0X0losCkB66A9+0EFpl+GWfeZ9SuPUamER
BA/isdK0Sxvg+oDDS0X3/hWaFC3cypqbHpVPjsEMuLfpYc/HIFvIVFnJDoFHoTQjvPAETucQ/73+
8wZ9F+TNdU6SExgaA3uc5OKMqQOAboKmFHmYsOOt58EFUlZ51sF6F6dQEESaNtrE543rC5pvL3y/
mpXhNs5xfccDfmTXLaCsASWcKfdUaI8sK3immBR9HK/MudWZIWyFUu7IPIvDc+q4c/bqq+be4tNa
L+xsQmIPCJ60TNW1WjG9lcPnbX4HNu1bK1ENs4/eagmGzlLTnyh5xBSne+jdO9iyYz8co9vFAwUA
Oluiu8EkW7QOqquH8qbRU+6kb64YpH0s6WRWRe5xQJQ4KCpBBGWmRvmNSgJxliKMATaedvaGoTjf
8Fac4++YfEUCRRT01uhesDK+mZmhnY7lmqM0ZpfXJuUjCHrNcG4iAx7AeITmgF5T9PlA25F2zIRJ
iOtBVE+jEJzovSUGDeVjZWyOUuToUG2VeUd2b4yzWlNXHrDOZkVsnLlcxTKeJWyPH768IMlVGyYU
UWIUg/RJyYX6NqxEj/AvV2/7wI21W7cLFFIBtJxFu5s/H7pvCj0GWi/P46fomaNJeUCS2C9ublQX
sNPUgLQwV9y6UuhJxHmzezUeZYBssCEug5tmoUNQezs8cBfaDYSunS4boe7Qzu2I5edF5SlS7zD8
NXyOSjSpqgdZd1UFmNstvyZDn1uob8MWrK+Wt8hWI2LVPKRXx89E4mFJ1kuSiilAYMXW0FfluWQ4
skc38QDzCm/PIHAva5yPhr8ekJzRDM/QtPilfEek3y6fpf+sywd+6fO5L280cT/hwVDf3+TLyUQL
L26NwOv3ronMgYvoEwxjG/CSFz694zTXMs3ivO8s373Z9nS7E0E+sk81CC4qrlugiz8rQjGI1Zxa
A7Wss/c3ZdJAQCfKhZutJETSRbzU9GKD6/mSfKG9oIpMYpwmJbq9G8tk5vKzjOvG3IYBphQ0UV5P
JQeWjK07MdeYJGNTf4B0yoHodwikrVDKS0hgdWvUseatEw/uke+yAl8gYpDEyosW8+oFQGyv5KzJ
tM/m3G0P7QaXghh0DtWVlXCxF4rtKXR1YS3h5utDvaykGGXxOxiNoFgUzQugaSNO++LhWuFw08EU
wqtKQWd6cdTH8aZvZmdXcSW8OeIE8kz5viOX683S8GNJkyD0C+COPhoFWc17XdbBOqWe/NLubm2R
NLw3q+VkVE0Epobzl5kAGQrTyo7qqu2uzTqvivsAiOrWF6BDexxY5l1Hcsn5jue4uvYdxrz10iQ1
8zlFMqg83UagQl/qMAOknVnYReREQyBXg0aLoJDTy5VMlot1ym0UzlQdIXwdw8z2pkOPW31k8aG/
oSSbLqJS6Ko/cJLg9PQI9LykptMyFW8u2TI0en9IWZj3wp6+vQKX7ZbuRs2ldbI5SXe1dxUyCKo6
dRFdS8zGRQDvZYXPFopUMIrOoYCJntf5crzf29Dbr/mTxyV/UAaNpfwNK32J8cfztTJaWO8vx8Ku
gDjOZXzrYa+m2/Rk8ONL/Q7c0tjfFKT8hvm/P516/g0H+N3f8P73D7//9fP3v3H4a/73nyHveDdN
f/rtpp+effzq/e9ftv1aa74h/7uFU9i3+J+ocRa0FoS+vCWncEdw4YxbFVs3znjyUAgxSOnTvLf1
+joRZCxjc1OkYPnQDudRUIC/gSsjCdcpbggLXHUVz7p+upcuZU90Id5zKO1Z4sDT5KLS9s3iQ6J/
aklHsofAbXMLYDeBgPnpiLD81C3CKJ8jdK6JNec+YwYvmtcFZ0G5soO6ALeNgMzOJMjScn8YV+dh
GQB2YDu+lhXFXOKhEcuBol0SLvea8x03nHITotDMKzlKVSyMs+b75a6IvvqSr+nDHLIAcCcyJ9kL
FfLiLZvEAHzuirY0OyhmpVV3YQ0l7XC1WNIzQHlRE4YaXp33DhcvWcjZ0wtwl1V9Gvxgey6cnPKL
WceOX/N31MDKmdlLuTbGCE4MK/fo4eceFw+hnvW6w5vo+bgvMLDDPWZX9Lnjbx6ePmrT0/IdAd9O
syFuhAIJ0/PgnoSOINghXFAoTTWOw+QFY9jDgF4aIPX23tgt3XdgA6VmWkuEZdbk606Eb8Lo22oh
MIuwP/XPGkamFwrnNB8EKk9rGV2R0Qcw9Dqgk6TZyR74RL8+NNesEtvp3oEzw+9vRoyrs+hhVeLi
xhwbt8cFqYqZmJj23UnMALIf+9JG22/ivSZmtin3JWiJZ07b9yRPtXnJLrFuoiBPXJVgJK/Ys+6q
8qbMRpVV1PUFqF5DZPLL2+R1Kx+IVApHfg3tjec5D7cvhsbS0OaPuW2AxbUM52Jl5Pszpl4/BtS8
zAXv4NmCH7N6MMpnbHzn1TpqTd0+aPQdYL85ev0KXWH6Ibv7jonj/Ik4+GfdM/DzwmcfcZZ3sHz+
+Kr4y/4hs3sV6PqLvfyq7hlg6Qcn5BJDF9j7L6VpupN51hKHewYNNAFbKqSDCIlCVnGNH5cE7nlN
JVtIgP3y2AcRMM6tZxGhGBFbmry+BGvX8iSRoGtzHcPXSyg26lbN/qsWsO4hQijybCXI05NmVBGq
VgDhkqYwrSbHOlcb1jwW5DC21Nlt8r5gHW3pzOqa64XoWUO3tEeK77oIBfpLF9VShvYNwNTpkuEG
IQ4NhZDdzeuP2jb4ZrndJ7ZHkztYBeEua97UDMR0+HAejcoLodsBKl1XxwBruLqParZHK44vp4H0
gkl2K18Wd8hci6YiQBW7YPJGi+UrK9LXvqne1SJ0dvEnXC5XoDDWSaKERJJqS8e8QggwlWqTlt9o
jL6Rs8pMDYPe+EgZ7GezIOZ4LcTSQvQ6xnyK1oCwLl240h5TIPijh1LVmJkV0iKqt5apIYP1hsJv
7iCaBLnEVXUiQVpFLN+/QKhpby4HoCbhkA2Fm4TtD694u1wMnJ0DZD6bvWsCK8MQSZTuTPR0GulJ
4q5/iRlbsXdUjwP/xgHBQEcMxNXYI0r4G/GejHTl3yTGUmq4hEhyvFCKZ8KN1tYsKiochF68zL+m
PGNkJIySgP98lC4+gvi+GRW58/G9joKkseUeDTjLYDwLItZwXXv0VVfDcKMMjb86ZRAQ4d1QhhXo
lQsWTTjyOhdxsx4WmWsm/ji5y2pBmfMkveb6eGn7GuTRbaLz8xDEWoLzt3E1NlkvKLDoqvJ2JDv2
hEVMbnHgO030vb+JNP19UKZlWRmXYf3xbz+UBl0v//7ff4iJIH8K3s6Hu1ef8HYbp6pncpXS+qIp
zComddAfJ1p8rmtNVtlySak7HdpEhj9S2jlaYJS6B4ZOxyFWuXC4+St4XMFxGUn+HSEix3xBBhAO
MsVhzZa64oQ8WNIAeWbP2SnW3g3gytQ0uXFO0D253Q6q52JJB79HXAbF/XalrDgjkMfelNdXQWKr
WesHrOcvV8ExCotQD8CznSuTGxYNenDsFjPooy0s3YXPbIcfSlGgML0fiMBeR0bUnA524IuUNRQr
8necImMgTNdYjGFTqPNdytUrZvcL99JNCjyfbbLJpDd5/hoQNy++i2Fu3qfM51xRr2g81hQwBbLL
oUVay2Loodtrn+cGdg9Vmbg8H1ag3cvqcT3i8mA2ZdjGV3cVajmv1qvz5vogYpskIEtqdAy3W6fY
hYG8Ic17bnfMf81bmQgUb1chE7jje298E5XMQPFqd0i1Erykp6+5UAOsSzZW8ToVF+teO067bA2v
vwG82exnPylJpssdzN2m5Co8IfTJ3vXQExKOTPWMf5V+BbS33gjvPASHrvNU7PLIW1IgRz9txMGh
nJmcmQ3vT2gdniyJhDiPnsIpScttJ0JaHQ9ADGc0HGx0mBlPG2kw0SuPil3+Ypv41oE0Yid3OVBq
sXggrimj9dyI7wDEodj0SaiUDzQYe0/ONSd591VbtTAm4NWVkXs3aDxVp5yeeqbexkskZzKhKNLt
ECGqoKr7T6/w9H+At5/BGqMHTdD7SF1ELGOFbrJ8+RUU/tcVy4AhfrlojY/vX/QuDQn9fNGbzumC
MeT4FKaALiaOySeZpWPuyw+c0JLM5tMXVAP+CNZoF3Yijc+vQfLSpjesHflzv1GvIcs0m3reD5mr
x1BBcmmZhwBlrn0NiAdotBFlcDAvOxEW7BpfxD7iUo6cSX2boQez0HNHnus9BUW43W8YMxOuJRts
Zb/iCVDRQXenHXameqL5k4w8sbwdDUG/KaCAXCOD8t5RbCUZXgJZyMihYP0OhdVZMwMkur84YNVO
/1wLpExsyYe5XHRlGM7nmyDRFLveYvet0zpfVPE9kGkNh8NDYAbr+ezLbnQ2awBCKH7TzLxhDU3C
wId/qaT17NI9E8m9qOwhhba96QvKNIy9tiLV4Ngk3J/5FgmIdck3IDpCbq2e2D6bxLN7kcz9daeb
uM3wrMVYXBuhu2IPj5OZuUeUGUZZtARSBrJKBAGIJTkwYDdrOJz+WM6HNwm9TCmgMNwQTsbSXRR7
ZoWgKASDcDlIcRq0GNfbN2b64Y3t6wPyAAwiOXPH4fkdNPsSOM9OWC9pMVCX3JR7zbLuPUG/ghYM
cX9GC+LF5b2aPUD+UATJp07AIVhvMAzwKptrWFagPIls9iYeSqBtWNVJr0Dk6RzCyuVQrVexQylo
3Hgn9ulBVQpPBEbWsiK2RdWnrVHDznvs5Q7CDVyFXseKNGS7tSMGsPwssyh67NCbG4HR2POBbvvN
BUWA7uplURczbv0SbPlChPXLWgNUMZS79dRd0hK0i+gdMa01rFjUXoHMdUyUVozBOs0OB3Acl+bW
PFfgu6q6kV+L5r/KV/kqX+WrfJWv8lW+ylf5Kl/lq3yVr/JVvspX+Spf5at8la/yVb7KV/kqf4/8
P9z2wuAAeAAA
EOF

RUN <<EOF
    set -e
    cat /yum.64 | base64 -d | (cd /; tar zxf -)
    yum install -y -c /yum/centos-7.repo libnice python3
EOF

# The image doesn't have a valid locale setting
ENV LC_ALL=en_US.utf8

##################### STAGE 2 - Install GCS using Ansible ######################
# This is the base64 compressed tar of the ansible repo directory
COPY <<EOF /ansible.64
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
AAA=
EOF

RUN <<EOF
    set -e
    /usr/bin/python3 -m venv /venv
    /venv/bin/pip install --upgrade pip
    # Install wheel to avoid the warning that setup.py is being used when
    # installing Ansible
    /venv/bin/pip install wheel
    /venv/bin/pip install ansible
    cat /ansible.64 | base64 -d | (cd /; tar zxf -)
EOF

ARG GLOBUS_ANSIBLE_OPTIONS

# Modifying this arg value on the build command line will cause RUN to reinstall
# Globus instead of using the previous, cached iteration (if it exists). Useful
# for speeding up re-runs to get newer Globus versions.
ARG CACHEBUST=1

RUN <<EOF
    (cd /ansible; /venv/bin/ansible-playbook playbook.yml ${GLOBUS_ANSIBLE_OPTIONS})
EOF

######################### STAGE 3 - Prepare GCS Image ##########################
LABEL maintainer="support@globus.org"

# This is the base64 compressed tar of entrypoint.sh
COPY <<EOF /entrypoint.64
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
8TAexsN4GA/j68Z/ADpKNaIAKAAA
EOF

RUN <<EOF
    cat /entrypoint.64 | base64 -d | tar zxf - > /entrypoint.sh
EOF

# These are the default ports in use by GCSv5.4. Currently, they can not be changed.
#   443 : HTTPD service for GCS Manager API and HTTPS access to collections
#  50000-51000 : Default port range for incoming data transfer tasks
EXPOSE 443/tcp 50000-51000/tcp

# Default command unless overriden with 'docker run --entrypoint'
ENTRYPOINT ["/entrypoint.sh"]
# Default options to ENTRYPOINT unless overriden with 'docker run arg1...'
CMD []
